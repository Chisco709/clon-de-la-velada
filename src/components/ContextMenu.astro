---
import Typography from "@/components/Typography.astro"

const { class: className, ...props } = Astro.props
---

<div
	class:list={[
		"contextMenu fixed z-20 w-auto rounded-md bg-neutral-900  p-2 shadow-lg ring-1 ring-[hsla(0,0%,100%,.08)] ring-opacity-5",
		className,
	]}
	hidden
	{...props}
>
	<div class="p-x-4 space-x-4">
		<Typography
			as="div"
			variant="medium"
			color="white"
			id="copy-svg"
			class="flex w-full cursor-pointer items-center gap-2 rounded-md px-2 py-2 duration-200 hover:bg-neutral-100/5"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				fill="none"
				viewBox="0 0 24 24"
				stroke-width="1.5"
				stroke="currentColor"
				class="h-4 w-4 opacity-50"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"
				></path>
			</svg>
			Copiar Logo como SVG
		</Typography>
	</div>
</div>
<div class="context-target"><slot /></div>

<style></style>

<script>
	document.addEventListener("astro:page-load", () => {
		const contextTarget = document.querySelector(".context-target")

		if (contextTarget) {
			contextTarget.addEventListener("contextmenu", (event: Event) => {
				event.preventDefault()
				const contextMenu = document.querySelector(".contextMenu") as HTMLElement
				if (contextMenu) {
					contextMenu.style.display = "block"
					contextMenu.style.top = `${(event as MouseEvent).pageY + 15}px`
					contextMenu.style.left = `${(event as MouseEvent).pageX + 10}px`
				}
			})
		}
		document.addEventListener("click", () => {
			const contextMenu = document.querySelector(".contextMenu") as HTMLElement | null
			const _isHovered = contextMenu?.matches(":hover")
			if (contextMenu) {
				contextMenu.style.display = "none"
			}
		})

		const copySvgLink = document.querySelector("#copy-svg")
		const svgToCopy =
			'<svg xmlns="http://www.w3.org/2000/svg" width="148" height="128" fill="none"><g fill="#fff" clip-path="url(#a)"><path d="M64.572 0h2.927l.157 9.7h2.614l-.057 2.765-5.764-.006L64.57 0h.003Zm10.77 3.827-1.233 8.638-2.973-.008L73.409 0c1.342.016 2.685.035 4.027.052.732 4.088 1.508 8.322 2.24 12.407l-3.051-.005-1.28-8.63-.003.003Zm-16.05 17.156-.313 42.823 7.215-.576-.158 6.447-16.313 2.044.836-50.58 8.73-.158h.004Zm-14.17.42-.126 6.938-7.928.557-.158 15.724 6.902-.945-.103 6.816-7.006 1.31-.21 16.406 8.051-1.993-.21 6.92c-5.69 1.525-11.32 3.22-16.836 5.294l.68-41.723.366-14.728 16.575-.576h.002Zm-21.07.945-7.06 60.697L5.75 89.178 0 24.024l8.783-.735 2.614 49.742 3.817-50.214 8.837-.472v.003ZM99.08 21.09c8.57-.055 16.485-.47 19.501 5.294 1.688 3.224 1.83 9.684 1.83 13.524.139 6.97.278 13.944.419 20.915.395 5.022.077 10.69-2.613 12.842-3.379 2.702-13.752-1.1-18.509-2.148-.21-16.808-.419-33.618-.626-50.425l-.002-.002Zm8.992 7.18.575 38.421c1.132.24 2.646.833 3.188-.366.808-1.793.158-6.528.158-8.91-.123-6.745-.245-13.49-.365-20.233-.003-2.83.509-7.632-1.413-8.598l-2.143-.314ZM79.108 69.311c-3.085.017-6.17.036-9.255.052l6.118-48.587c4.218.035 8.435.07 12.652.103l6.537 49.9-9.202-1.1-3.556-37.162-3.294 36.794Zm54.481 13.576-8.731-3.93 4.966-56.503 12.548.838L148 89.175l-7.928-2.931-3.869-48.536-2.614 45.182v-.003ZM95.93 75.193c.69.05 1.3.063 1.988.11.425 1.538-.226 3.255-1.405 3.534-1.69.398-3.695-.882-3.885.038l-1.96-.036c-.46-1.951.76-4.22 3.36-3.51.677.107 1.464.598 1.905-.136h-.003ZM80.613 85.608 78.97 103.92l-4.36-.15 2.824-23.876 6.126.055 3.376 25.137-4.4-.847-1.922-18.627v-.003Zm-18.268-5.56-.284 21.609 3.54-.437.022 3.065c-1.367.237-2.74.442-4.1.715l-3.766.756.373-25.538 4.215-.17Zm26.537.156 4.214.096 3.088 15.6-.406-15.308 3.931.06.455 28.237-4.141-1.616-3.158-14.708.509 13.928-4.035-1.059-.457-25.23Zm-33.613.147-.033 3.317-3.874.171-.156 8.456 3.472-.609-.02 3.434-3.46.614c-.032 2.71-.079 5.871-.111 8.578l4.032-1.22c-.066 1.122-.068 2.317-.134 3.442-2.741.922-5.624 1.951-8.298 3.062.16-9.441.349-19.359.51-28.8l8.072-.447v.002Zm52.919 28.486c.31 0 .746.09.746-1.217 0-7.061-.292-14.143-.292-21.008 0-.93-.561-1.359-.961-1.359-.55 0-1.124.363-1.124 1.305 0 4.285.517 16.903.517 21.106 0 .647.882 1.173 1.116 1.173h-.002Zm-1.441-27.648c4.585-.046 5.895 3.235 6.053 7.17v3.472l.049 10.726c0 3.655.955 10.325-2.208 10.918-1.65.308-4.062-1.671-4.798-2.454-.884-.945-1.764-1.987-2.254-3.319-1.239-1.67-1.759-22.26-.245-24.253.697-1.392 1.25-1.992 3.403-2.26Zm-67.487.126c1.704-.02 2.924.352 3.645 1.299 1.416.579 1.285 6.518 1.157 12.795-.24 11.758 1.256 14.921-8.067 19.927-.416.262-1.671 1.01-1.965 1.154.032-11.348.065-23.248.095-34.596 1.71-.192 3.422-.385 5.135-.576v-.003Zm-.912 4.92-.24 23.424c1.974-.265 1.68-2.97 1.68-5.194l.144-13.322c0-1.277.686-5.59-1.584-4.904v-.003Z"/><path fill-rule="evenodd" d="m81.144 110.115-.632.969a4.408 4.408 0 0 0-.653 1.67l-1.634 9.596a.716.716 0 0 0 .196.625.99.99 0 0 0 .657.29l-3.526 1.4a.037.037 0 0 1-.05-.025l-3.166-10.046-.375.185a.543.543 0 0 0-.3.491l.136 9.894a.614.614 0 0 0 .66.606l.125-.008c.04-.003.051.052.016.068l-5.43 2.165c-.045.019-.086-.041-.05-.077l.337-.352a3.98 3.98 0 0 0 1.1-2.757l-.025-8.578c0-.486-.27-.931-.7-1.154l-.947-.5c-.043-.022-.038-.084.008-.101l4.74-1.506-.397-.852c-.017-.033.01-.071.049-.068l3.087.404a.18.18 0 0 1 .153.133l1.854 6.922.735-6.157a.93.93 0 0 0-.515-.945l-.615-.3c-.087-.041-.079-.169.01-.202l5.114-1.842c.03-.011.057.022.038.049v.003Z" clip-rule="evenodd"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h148v128H0z"/></clipPath></defs></svg>'

		if (copySvgLink) {
			copySvgLink.addEventListener("click", (event: Event) => {
				event.preventDefault()
				navigator.clipboard.writeText(svgToCopy)
			})
		}
	})
</script>
