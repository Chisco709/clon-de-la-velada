<style>
	@keyframes sprite {
		to {
			background-position: 100% 0;
		}
	}
</style>

<script>
	function hitScreen(mouseX: number, mouseY: number) {
		const sound = new Audio("/hit.wav")
		const sprite = document.createElement("span")
		const spriteCenter = 300 / 2
		const randomSprite = Math.ceil(Math.random() * 2)

		sprite.style.cssText = /* css */ `
			position: fixed;
			top: ${mouseY - spriteCenter}px;
			left: ${mouseX - spriteCenter}px;
			width: 300px;
			height: 300px;
			display: inline-block;
			background-image: url("/sprite-${randomSprite}.png");
			background-repeat: no-repeat;
			background-position: 0 0;
			animation: sprite 150ms steps(15, end);
			z-index: 999;
			pointer-events: none;
		`

		sound.play()
		document.body.appendChild(sprite)
		setTimeout(() => document.body.removeChild(sprite), 200)
	}

	function isTouchDevice() {
		return "ontouchstart" in window || navigator.maxTouchPoints > 0
	}

	if (isTouchDevice()) {
		window.addEventListener("touchstart", (ev) => {
			const { clientX: mouseX, clientY: mouseY } = ev.touches[0]
			hitScreen(mouseX, mouseY)
		})
	} else {
		window.addEventListener("click", (ev) => {
			const { clientX: mouseX, clientY: mouseY } = ev
			hitScreen(mouseX, mouseY)
		})
	}
</script>
